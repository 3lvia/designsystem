@use 'breakpoints';

@mixin create-breakpoint-classes($size, $breakpoint: '') {
  .col-#{$breakpoint}#{$size} {
    width: calc(100% / 12 * $size);
  }

  .order-#{$breakpoint}#{$size} {
    order: $size;
  }

  .offset-#{$breakpoint}#{$size} {
    margin-left: calc(100% / 12 * $size);
  }

  .row-cols-#{$breakpoint}#{$size} > * {
    width: calc(100% / $size);
  }
}

.e-grid {
  --offset: 24px;
  box-sizing: border-box;

  .row {
    display: flex;
    flex-wrap: wrap;
    margin-inline: calc(var(--offset) * -1);

    &.e-grid-gutters-ext.e-grid-gutters-vertical [class^='col'],
    &.e-grid-gutters-int.e-grid-gutters-vertical [class^='col'] {
      padding-block: var(--offset) !important;
    }
  }

  .no-gutters {
    margin-right: 0;
    margin-left: 0;
  }

  .no-gutters > .col,
  .no-gutters > [class*='col-'] {
    padding-right: 0;
    padding-left: 0;
  }

  .col,
  [class^='col-'] {
    position: relative;
    width: 100%;
    padding-inline: var(--offset);
  }

  .col {
    flex: 1 0 0%;
  }

  [class^='col-'] {
    flex: 0 0 auto;
  }

  // Create a bunch of classes within the 12 column grid
  // The order of these matter, because of specificity.
  @for $i from 1 through 12 {
    @include create-breakpoint-classes($i);
  }

  @for $i from 1 through 12 {
    @include breakpoints.lt-mobile() {
      @include create-breakpoint-classes($i, sm-);
    }
  }

  @for $i from 1 through 12 {
    @include breakpoints.gt-mobile() {
      @include create-breakpoint-classes($i, md-);
    }
  }

  @for $i from 1 through 12 {
    @include breakpoints.gt-tablet() {
      @include create-breakpoint-classes($i, lg-);
    }
  }

  @for $i from 1 through 12 {
    @include breakpoints.gt-desktop() {
      @include create-breakpoint-classes($i, xl-);
    }
  }

  @include breakpoints.lt-mobile() {
    &:has(.e-grid-gutters-ext),
    &:has(.e-grid-gutters-int) {
      --offset: 8px;
    }
  }

  @include breakpoints.gt-mobile() {
    &:has(.e-grid-gutters-ext) {
      --offset: 16px;
    }
    &:has(.e-grid-gutters-int) {
      --offset: 12px;
    }
  }

  @include breakpoints.gt-tablet() {
    &:has(.e-grid-gutters-ext) {
      --offset: 28px;
    }
    &:has(.e-grid-gutters-int) {
      --offset: 12px;
    }
  }

  @include breakpoints.gt-desktop() {
    &:has(.e-grid-gutters-ext) {
      --offset: 28px;
    }
    &:has(.e-grid-gutters-int) {
      --offset: 12px;
    }
  }
}
