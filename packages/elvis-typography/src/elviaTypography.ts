export const ElviaTypography = {
  'title-lg': {
    altLabels: ['title-large'],
    fontFamily: '"Red Hat Display", Verdana, sans-serif',
    fontSize: '44px',
    fontSizeMobile: '32px',
    fontWeight: '900',
    lineHeight: '53px',
    lineHeightMobile: '34px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'title-md': {
    altLabels: ['title-medium'],
    fontFamily: '"Red Hat Display", Verdana, sans-serif',
    fontSize: '30px',
    fontSizeMobile: '24px',
    fontWeight: '700',
    lineHeight: '36px',
    lineHeightMobile: '29px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'title-sm': {
    altLabels: ['title-small'],
    fontFamily: '"Red Hat Display", Verdana, sans-serif',
    fontSize: '24px',
    fontSizeMobile: '20px',
    fontWeight: '700',
    lineHeight: '29px',
    lineHeightMobile: '24px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'title-xs': {
    altLabels: ['title-xsmall'],
    fontFamily: '"Red Hat Display", Verdana, sans-serif',
    fontSize: '18px',
    fontSizeMobile: '16px',
    fontWeight: '700',
    lineHeight: '22px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'title-caps': {
    altLabels: ['text-caps'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '14px',
    fontWeight: '500',
    lineHeight: '17px',
    letterSpacing: '0.8px',
    fontStyle: 'unset',
    textTransform: 'uppercase',
    color: 'inherit',
  },

  'text-lead': {
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '24px',
    fontSizeMobile: '22px',
    fontWeight: '400',
    lineHeight: '39px',
    lineHeightMobile: '36px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-lg': {
    altLabels: ['text-large', 'text-body'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '20px',
    fontSizeMobile: '18px',
    fontWeight: '400',
    lineHeight: '32px',
    lineHeightMobile: '29px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-lg-strong': {
    altLabels: ['text-large-strong'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '20px',
    fontSizeMobile: '18px',
    fontWeight: '500',
    lineHeight: '32px',
    lineHeightMobile: '29px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-lg-light': {
    altLabels: ['text-large-light'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '20px',
    fontSizeMobile: '18px',
    fontWeight: '300',
    lineHeight: '32px',
    lineHeightMobile: '29px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-md': {
    altLabels: ['text-medium', 'text-description'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '16px',
    fontWeight: '400',
    lineHeight: '28px',
    lineHeightMobile: '160%',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },
  'text-md-strong': {
    altLabels: ['text-medium-strong'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '16px',
    fontWeight: '500',
    lineHeight: '28px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },
  'text-md-light': {
    altLabels: ['text-medium-light'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '16px',
    fontWeight: '300',
    lineHeight: '28px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-sm': {
    altLabels: ['text-small', 'text-info'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '14px',
    fontWeight: '400',
    lineHeight: '22px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },
  'text-sm-strong': {
    altLabels: ['text-small-strong'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '14px',
    fontWeight: '500',
    lineHeight: '22px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },
  'text-sm-light': {
    altLabels: ['text-small-light'],
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '14px',
    fontWeight: '300',
    lineHeight: '22px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-micro': {
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '11px',
    fontWeight: '400',
    lineHeight: '14px',
    letterSpacing: '0.2px',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-micro-strong': {
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '11px',
    fontWeight: '500',
    lineHeight: '14px',
    letterSpacing: '0.2px',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-micro-light': {
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '11px',
    fontWeight: '300',
    lineHeight: '14px',
    letterSpacing: '0.2px',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-quote': {
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '26px',
    fontSizeMobile: '20px',
    fontWeight: '400',
    lineHeight: '42px',
    lineHeightMobile: '32px',
    letterSpacing: 'unset',
    fontStyle: 'italic',
    textTransform: 'unset',
    color: 'inherit',
  },

  'text-img': {
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '18px',
    fontSizeMobile: '16px',
    fontWeight: '400',
    lineHeight: '29px',
    lineHeightMobile: '26px',
    letterSpacing: 'unset',
    fontStyle: 'italic',
    textTransform: 'unset',
    color: 'inherit',
    textAlign: 'center',
  },

  'text-label': {
    deprecated: '1.0.0',
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '16px',
    fontWeight: '500',
    lineHeight: '23px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },
  'text-option': {
    deprecated: '1.0.0',
    fontFamily: '"Red Hat Text", Verdana, sans-serif',
    fontSize: '16px',
    fontWeight: '400',
    lineHeight: '22px',
    letterSpacing: 'unset',
    fontStyle: 'unset',
    textTransform: 'unset',
    color: 'inherit',
  },
};

export default ElviaTypography;

export type TypographyName = keyof typeof ElviaTypography;

/**
 * Get a typography style from elvis-typography.
 * @param typographyName Name of requested typography.
 * @returns Object containing CSS properties of typography.
 *
 */
export const getTypography = <Key extends TypographyName>(
  typographyName: Key,
): (typeof ElviaTypography)[Key] | null => {
  if (ElviaTypography[typographyName]) {
    if ('deprecated' in ElviaTypography[typographyName]) {
      warnDeprecatedTypography(typographyName);
    }
    return ElviaTypography[typographyName];
  } else {
    console.error(`Cannot get typography ${typographyName} from elvis-typography.`);
    return null;
  }
};

const camelCaseToKebabCase = (camel: string): string => {
  return camel.replace(/([A-Z])/g, (match) => `-${match.toLowerCase()}`);
};

/**
 * @param typographyName Name of requested typography.
 * @returns CSS-formatted string with all the properties of the typography, including a media query for mobile font properties.
 */
export const getTypographyCss = <Key extends TypographyName>(typographyName: Key): string => {
  const typography = getTypography(typographyName);
  if (!typography) {
    console.error(`Cannot get typography ${typographyName} from elvis-typography.`);
    return '';
  }
  let typographyString = '';
  for (const property in typography) {
    const value = typography[property];
    if (!property.endsWith('Mobile') && property !== 'altLabels') {
      typographyString += `${camelCaseToKebabCase(property)}: ${value};\n`;
    }
  }
  const mobileProperties = Object.fromEntries(
    Object.entries(typography).filter(([key]) => key.endsWith('Mobile')),
  );

  if (Object.keys(mobileProperties).length > 0) {
    typographyString += `@media (max-width: 767px) {\n`;
    {
      for (const property in mobileProperties) {
        const value = mobileProperties[property];
        typographyString += `\t${camelCaseToKebabCase(property.slice(0, -6))}: ${value};\n`;
      }
    }
    typographyString += `}\n`;
  }
  return typographyString;
};

const warnDeprecatedTypography = (typographyName: string): void => {
  const localhost = typeof window !== 'undefined' && window?.location.href.includes('localhost');
  if (!localhost) {
    return;
  }
  console.warn(`The typography "${typographyName}" has been deprecated.`);
};
