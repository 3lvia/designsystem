<div class="wrapper">
  <div class="navbar" id="side-navbar">
    <nav class="navbar-scroll-container navbar-bottom-blur" (scroll)="updateNavbarBlur()">
      <div *ngIf="!isLoaded">
        <span class="e-content-loader" style="height: 50vh; width: 100%"></span>
      </div>
      <ul class="navbar-list" *ngIf="isLoaded">
        <li class="navbar-item" *ngFor="let navbarItem of navbarList; let i = index">
          <a
            [routerLink]="['/' + this.subMenuRoute + '/' + navbarItem.docUrl]"
            [ngClass]="{ 'active-route': activeNavbarItem === navbarItem }"
            (click)="markNewActiveNavbarItem(navbarItem)"
          >
            <div class="navbar-item-title">
              {{ navbarItem.title }}
            </div>
          </a>
          <div class="anchors" *ngIf="visibleAnchors && visibleAnchors.length > 0">
            <div *ngIf="navbarItem === prevActiveNavbarItem">
              <div class="link" *ngFor="let anchor of prevVisibleAnchors">
                <a class="anchor" id="navbar-{{ anchor.title }}" href="javascript:void(0)">
                  {{ anchor.title }}
                </a>
              </div>
            </div>
            <div *ngIf="navbarItem === activeNavbarItem && navbarItem !== prevActiveNavbarItem">
              <div class="link" *ngFor="let anchor of visibleAnchors">
                <a
                  (click)="chooseAnchor(anchor.title)"
                  class="anchor"
                  [ngClass]="{ 'active-anchor': anchor === activeAnchor }"
                  id="navbar-{{ anchor.title }}"
                  href="javascript:void(0)"
                >
                  {{ anchor.title }}
                </a>
              </div>
            </div>
          </div>
          <div
            *ngIf="navbarItem.isMainPage && !navbarList[i + 1].isMainPage"
            style="height: 1px"
            class="e-mt-16 e-ml-16 e-mr-16 e-bg-grey-10"
          ></div>
        </li>
      </ul>
    </nav>
    <ng-container [ngTemplateOutlet]="localeToggleTemplate" [ngTemplateOutletContext]="{ divider: true }" />
  </div>

  <nav class="navbar-phone" [ngClass]="{ 'show-block': isLandingPage }" *ngIf="isLoaded">
    <div class="navbar-phone-box e-w-100 e-mx-40">
      <ng-container
        [ngTemplateOutlet]="localeToggleTemplate"
        [ngTemplateOutletContext]="{ divider: false }"
      />
    </div>
    <div
      class="navbar-phone-box e-w-100 e-mx-40"
      style="border-bottom: 1px solid #e9e9e9"
      *ngFor="let navbarItem of navbarList"
    >
      <a
        class="e-link e-link--action e-w-100 e-py-24"
        [routerLink]="['/' + this.subMenuRoute + '/' + navbarItem.docUrl]"
        (click)="markNewActiveNavbarItem(navbarItem)"
      >
        <span class="e-link__title e-w-100">{{ navbarItem.title }}</span>
        <span class="e-link__icon">
          <i class="e-icon e-icon--arrow_right_circle-color" aria-hidden="true"></i>
          <i class="e-icon e-icon--arrow_right_circle-filled-color" aria-hidden="true"></i>
        </span>
      </a>
    </div>
  </nav>
</div>

<ng-template #localeToggleTemplate let-divider="divider">
  <div class="navbar-locale-toggle" *ngIf="isLoaded && showLocaleToggle">
    <elvia-divider *ngIf="divider" [inlineStyle]="{ marginTop: '16px' }" />
    <div class="navbar-locale-toggle-buttons">
      <button
        class="e-btn e-btn--tertiary"
        (click)="setLocale('en-GB')"
        [ngClass]="{ 'e-btn---active': locale === 'en-GB' }"
      >
        English
      </button>
      <div class="navbar-locale-toggle-divider"></div>
      <button
        class="e-btn e-btn--tertiary"
        (click)="setLocale('nb-NO')"
        [ngClass]="{ 'e-btn---active': locale === 'nb-NO' }"
      >
        Norsk
      </button>
    </div>
  </div>
</ng-template>
