<!-- Header  -->
<header class="header">
  <div class="logo">
    <a class="header-top_logo" [routerLink]="['', 'home']">
      <img src="./../../../assets/logo/elvia_positive_1.svg" alt="Elvia Logo" *ngIf="!isPrideMonth" />
      <img src="./../../../assets/logo/elvia_pride_rgb.svg" alt="Elvia Logo" *ngIf="isPrideMonth" />
    </a>
  </div>

  <div class="tabs" *ngIf="mainMenu">
    <a
      *ngFor="let menuItem of mainMenu.pages"
      class="tabs-links"
      style="color: black"
      [routerLink]="['/' + menuItem.path]"
      routerLinkActive="active"
      role="tab"
      (click)="closeSearch()"
    >
      {{ menuItem.title }}
    </a>
  </div>

  <div class="external-links">
    <div class="tabs-links active elvis-search e-mr-24" (click)="closeSearch()">
      <span class="elvis-search__icon e-mr-8">
        <i class="e-icon e-icon--search-bold e-icon--xs" aria-hidden="true"></i>
      </span>
      <span class="elvis-search__title">Search</span>
    </div>
  </div>
  <div class="mobile-menu">
    <div class="closing">
      <button
        class="e-btn e-btn--icon e-btn--circled e-btn--lg e-mt-16"
        (click)="closeSearch()"
        aria-label="Close search"
      >
        <span class="e-btn__icon">
          <i class="e-icon e-icon--remove_circle-color" aria-hidden="true" aria-hidden="true"></i>
          <i class="e-icon e-icon--remove_circle-filled-color" aria-hidden="true" aria-hidden="true"></i>
        </span>
      </button>
    </div>
  </div>
</header>

<div
  class="content"
  [ngClass]="{
    'content-no-result': resultStatus === 'no-result',
    'content-result': (resultStatus === 'show' || resultStatus === 'loading'),
    'long-result': resultsToDisplay.length > 2,
  }"
>
  <div class="inner-content">
    <div class="close-btn-desk">
      <button
        class="e-btn e-btn--icon e-btn--circled e-btn--lg"
        (click)="closeSearch()"
        aria-label="Close search"
      >
        <span class="e-btn__icon">
          <i class="e-icon e-icon--remove_circle-color" aria-hidden="true" aria-hidden="true"></i>
          <i class="e-icon e-icon--remove_circle-filled-color" aria-hidden="true" aria-hidden="true"></i>
        </span>
      </button>
    </div>
    <div class="elvis-search-header e-mt-8">
      <h2 class="e-title-md search-title">What are you looking for?</h2>
      <div class="search-wrapper">
        <div class="e-search e-search--global" [ngClass]="{ 'e-search--searched': searchString !== '' }">
          <div class="e-input">
            <input
              [(ngModel)]="searchString"
              type="text"
              placeholder="Search"
              id="search-field"
              autocomplete="off"
              (keyup)="onSearch()"
              aria-label="Search through site content"
            />
          </div>
          <button
            class="e-btn e-btn--icon"
            (click)="clearSearch()"
            aria-label="Empty search field"
            id="search-clear-button"
          >
            <span class="e-btn__icon">
              <i class="e-icon e-icon--close-bold" aria-hidden="true"></i>
            </span>
          </button>
        </div>
        <p class="component-suggestions" *ngIf="resultStatus === 'show' && synonymComponents.length > 0">
          Looking for the
          <ng-container *ngFor="let component of synonymComponents; let last = last; let first = first">
            <span *ngIf="!last && !first">,&nbsp;</span>
            <span *ngIf="last && !first">or</span>
            <a class="e-link e-link--inline" [routerLink]="[component.absolutePath]" (click)="closeSearch()">
              {{ component.title }}
            </a>
          </ng-container>
          component?
        </p>
      </div>
    </div>

    <ng-container [ngSwitch]="resultStatus">
      <!-- Fake results loading -->
      <div *ngSwitchCase="'loading'" class="results">
        <div *ngIf="searchString">
          <ng-container *ngFor="let result of [1, 2, 3]; let last = last">
            <div class="result-item loading">
              <div class="e-content-loader e-w-100"></div>
            </div>
            <elvia-divider *ngIf="!last" />
          </ng-container>
        </div>
      </div>

      <!-- Actual no results -->
      <div class="no-results e-text-center" *ngSwitchCase="'no-result'">
        <p class="e-m-0">
          Oh snap ðŸ˜•
          <br />
          We canâ€™t find what you are looking for
        </p>
      </div>

      <!-- Results -->
      <div class="results" *ngSwitchCase="'show'">
        <ng-container *ngFor="let result of resultsToDisplay; let last = last">
          <article>
            <a
              class="result-item"
              [routerLink]="[result.absolutePath]"
              [fragment]="result.fragmentPath"
              (click)="closeSearch()"
            >
              <div class="result-heading">
                <p class="e-m-0 title" [id]="'search_' + result.title">{{ result.title }}</p>
                <div class="e-tag" *ngIf="result.type">{{ result.type }}</div>
              </div>
              <p
                class="result-content e-m-0"
                *ngIf="result.description"
                [id]="encodeHTML(result.description)"
              ></p>
            </a>
          </article>
          <elvia-divider *ngIf="!last" />
        </ng-container>
      </div>
    </ng-container>
  </div>
</div>
