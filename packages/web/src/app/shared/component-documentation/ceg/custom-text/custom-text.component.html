<elvia-popover
  verticalPosition="below"
  horizontalPosition="right"
  (onOpen)="popoverIsOpen = true"
  (onClose)="popoverIsOpen = false"
>
  <div slot="content" class="custom-text-popover-container">
    <ng-container *ngFor="let input of customText | async | keyvalue">
      <div class="e-form-field" *ngIf="input.value.type === 'textarea'; else inputTemplate">
        <label class="e-form-field__label" [for]="getInputId(input.key)">
          {{ input.value.label }}
        </label>
        <div class="e-input">
          <textarea
            [id]="getInputId(input.key)"
            type="text"
            #domTextarea
            (change)="onChange(input.key, domTextarea.value)"
            >{{ input.value.value }}</textarea
          >
        </div>
      </div>

      <ng-template #inputTemplate>
        <div class="e-form-field">
          <label class="e-form-field__label" [for]="getInputId(input.key)">{{ input.value.label }}</label>
          <div class="e-input">
            <input
              [id]="getInputId(input.key)"
              type="text"
              [value]="input.value.value"
              #domInput
              (change)="onChange(input.key, domInput.value)"
            />
          </div>
        </div>
      </ng-template>
    </ng-container>

    <button class="e-btn e-btn--tertiary e-btn--sm reset-btn" (click)="resetText()">
      <span class="e-btn__icon">
        <i class="e-icon e-icon--reset" aria-hidden="true"></i>
      </span>
      <span class="e-btn__title">Reset text</span>
    </button>
  </div>

  <button
    slot="trigger"
    class="e-btn e-btn--tertiary e-btn--sm"
    [ngClass]="{ 'e-btn---active': popoverIsOpen }"
  >
    <span class="e-btn__icon">
      <i class="e-icon e-icon--edit" aria-hidden="true"></i>
    </span>
    <span class="e-btn__title">Customize text</span>
  </button>
</elvia-popover>
