<div class="ceg-container component-preview-animation" [ngClass]="{ 'inline-margins': inlineExample }">
  <!--Top filters-->
  <div *ngIf="typeOptions.length !== 0 || bgOptions.length !== 0 || typesData" class="ceg-top-filters">
    <div *ngIf="typeOptions.length !== 0 && !typesData" class="ceg-dropdown">
      <elvia-dropdown
        [options]="typeOptions"
        [defaultValue]="typeOptions[defaultType]"
        label="Type"
        (valueOnChange)="updateFormStates('type', $event); updateSelectedType($event.detail.value)"
      ></elvia-dropdown>
    </div>
    <div *ngIf="typesData" class="ceg-dropdown">
      <elvia-dropdown
        [options]="typeOptions"
        [defaultValue]="typeOptions[0]"
        label="Type"
        (valueOnChange)="updateFormStates('type', $event); updateSelectedTypeCustom($event.detail.value)"
      ></elvia-dropdown>
    </div>
    <div *ngIf="bgOptions.length !== 0" class="ceg-dropdown">
      <elvia-dropdown
        [options]="bgOptions"
        [defaultValue]="bgOptions[defaultBg]"
        label="Background"
        (valueOnChange)="updateFormStates(bgObj.propName, $event); updateSelectedBg($event.detail.value)"
      ></elvia-dropdown>
    </div>
  </div>

  <div class="ceg-row-1 e-mb-16" [ngStyle]="{ 'min-height.px': height }" *ngIf="hasPreview">
    <!--Preview-->
    <div class="ceg-col-1" [ngClass]="{ 'full-width': inlineExample }" #cegContent>
      <div
        class="ceg-code-preview"
        [ngClass]="{
          'ceg-code-preview--accordion': accordionCustom,
          'e-bg-white': selectedBg === 'White',
          'e-bg-grey-05': selectedBg === 'Light grey',
          'e-bg-grey': selectedBg === 'Dark grey'
        }"
        [style.overflowY]="overflowY"
        [style.overflowX]="overflowX"
      >
        <div
          [innerHTML]="dynamicCode"
          class="ceg-frame"
          [ngClass]="{ 'aligned-top': alignedTop }"
          style="display: flex"
          [style.width.%]="width"
        ></div>
      </div>
    </div>

    <!--Side filters-->
    <div class="ceg-col-2 ceg-side-filters-desktop" *ngIf="!inlineExample && enableFilters">
      <app-ceg-filters
        [componentData]="componentData"
        [formGroupList]="formGroupList"
        [topFilterFormStates]="topFilterFormStates"
        (hasVisibleFilters)="hasSideFilters = $event"
      ></app-ceg-filters>
    </div>
    <div
      class="ceg-side-filters-mobile"
      *ngIf="formGroupList.length !== 0 && hasSideFilters && enableFilters"
    >
      <elvia-popover [posX]="'left'" [posY]="'bottom'">
        <button slot="trigger" class="e-btn e-btn--icon">
          <span class="e-btn__icon">
            <i class="e-icon e-icon--list" *ngIf="selectedBg !== 'Dark grey'"></i>
            <i class="e-icon e-icon--list e-icon--inverted" *ngIf="selectedBg === 'Dark grey'"></i>
          </span>
        </button>
        <div slot="content">
          <div class="e-ml-n24 e-mr-40">
            <app-ceg-filters
              [componentData]="componentData"
              [formGroupList]="formGroupList"
              [desktop]="false"
              [topFilterFormStates]="topFilterFormStates"
              (hasVisibleFilters)="hasSideFilters = $event"
            ></app-ceg-filters>
          </div>
        </div>
      </elvia-popover>
    </div>
  </div>

  <!--Code-->
  <div class="ceg-row-2" [ngClass]="{ 'full-width': inlineExample }">
    <elvia-accordion openLabel="View code" closeLabel="Hide code" size="small" type="normal">
      <div slot="content">
        <app-component-example-code
          [componentData]="componentData"
          [inlineExample]="inlineExample"
        ></app-component-example-code>
      </div>
    </elvia-accordion>
  </div>
</div>
