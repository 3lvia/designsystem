<div class="ceg-side-filters">
  <form class="ceg-side-filter e-form_field e-w-100" *ngFor="let formGroup of formGroupList; let i = index">
    <!--Radios-->
    <div
      *ngIf="formGroup.formType === 'radio' && (formGroup | visibleFields : formStates : false)"
      [ngClass]="{
        'ceg-filter-margin': i !== formGroupList.length - 1
      }"
    >
      <label class="e-form-field__label">{{ formGroup.label }}</label>
      <label
        *ngFor="let formField of formGroup.formGroupOptions; let i = index"
        class="e-radio e-radio--compact"
        for="{{ formGroup.label }}-{{ formField.name }}-{{ desktop }}"
        (change)="
          onInputValueChange(formGroup, undefined, formField.name);
          updateRadioProp(formGroup.propName, formField.name, $any(formGroup.type))
        "
      >
        <input
          type="radio"
          id="{{ formGroup.label }}-{{ formField.name }}-{{ desktop }}"
          name="{{ formGroup.label }}"
          [checked]="formField.defaultValue"
          [disabled]="!(formGroup | visibleFields : formStates : true)"
        />
        <span class="e-radio__mark"></span>
        <span
          class="e-radio__label"
          [ngClass]="{
            'e-uppercase': formGroup.labelTypography === 'uppercase',
            'e-lowercase': formGroup.labelTypography === 'lowercase',
            'e-capitalize': formGroup.labelTypography === 'capitalize'
          }"
        >
          {{ formField.label ? formField.label : formField.name }}
        </span>
      </label>
    </div>

    <!--Toggle-->
    <div
      *ngIf="formGroup.formType === 'toggle' && (formGroup | visibleFields : formStates : false)"
      [ngClass]="{
        'ceg-filter-margin': i !== formGroupList.length - 1
      }"
    >
      <label class="e-form-field__label" *ngIf="formGroup.displayGroup">{{ formGroup.displayGroup }}</label>
      <label
        class="e-toggle"
        role="switch"
        [ngClass]="{
          'e-toggle---disabled': !(formGroup | visibleFields : formStates : true)
        }"
      >
        {{ formGroup.label }}
        <input
          class="e-toggle__input"
          type="checkbox"
          id="{{ formGroup.propName }}-{{ desktop }}"
          [checked]="formGroup.defaultValue"
          (change)="onInputValueChange(formGroup, $event, undefined); updateToggleCheckboxProp(formGroup)"
          [disabled]="!(formGroup | visibleFields : formStates : true)"
        />
      </label>
    </div>

    <!--Checkbox-->
    <div
      *ngIf="formGroup.formType === 'checkbox' && (formGroup | visibleFields : formStates : false)"
      [ngClass]="{
        'ceg-filter-margin': i !== formGroupList.length - 1
      }"
    >
      <label class="e-form-field__label">{{ formGroup.label }}</label>
      <div *ngFor="let formField of formGroup.formGroupOptions">
        <label
          for="{{ formField.propName }}-{{ desktop }}"
          (change)="
            onInputValueChange(formField, $event, undefined); updateToggleCheckboxProp(formGroup, formField)
          "
          class="e-checkbox e-checkbox--compact"
          [ngClass]="{
            'e-ml-8': (formField | checkboxChildFields : componentData)
          }"
        >
          <input
            *ngIf="formField.defaultValue"
            type="checkbox"
            id="{{ formField.propName }}-{{ desktop }}"
            name="{{ formGroup.label }}"
            [disabled]="!(formField | visibleFields : formStates : true)"
            checked
          />
          <input
            *ngIf="!formField.defaultValue"
            type="checkbox"
            id="{{ formField.propName }}-{{ desktop }}"
            name="{{ formGroup.label }}"
            [disabled]="!(formField | visibleFields : formStates : true)"
          />
          <span class="e-checkbox__mark"></span>
          <span class="e-checkbox__label">{{ formField.name }}</span>
        </label>
      </div>
    </div>

    <!--Counter-->
    <div
      *ngIf="formGroup.formType === 'counter' && (formGroup | visibleFields : formStates : false)"
      [ngClass]="{
        'ceg-filter-margin': i !== formGroupList.length - 1
      }"
    >
      <label class="e-form-field__label">{{ formGroup.label }}</label>
      <div class="counter">
        <button
          class="e-btn e-btn--icon e-btn--circled e-btn--sm e-mr-8"
          [disabled]="
            counterNumber === formGroup.counterMin || !(formGroup | visibleFields : formStates : true)
          "
          (click)="
            onInputValueChange(formGroup, undefined, counterNumber ? counterNumber : formGroup.defaultValue);
            updateCounterProp(
              counterNumber ? counterNumber : $any(formGroup.defaultValue),
              formGroup,
              -$any(formGroup.counterStepValue)
            )
          "
          aria-label="Subtract from count"
        >
          <span class="e-btn__icon">
            <i
              class="e-icon e-icon--subtract_circle"
              [ngClass]="{
                'e-icon--color-disabled':
                  counterNumber === formGroup.counterMin || !(formGroup | visibleFields : formStates : true)
              }"
              aria-hidden="true"
            ></i>
            <i class="e-icon e-icon e-icon--subtract_circle-filled-color" aria-hidden="true"></i>
          </span>
        </button>
        <span
          class="counter__number e-text-md"
          [ngClass]="{
            small: $any(formGroup.counterMax) < 10,
            disabled: !(formGroup | visibleFields : formStates : true)
          }"
          *ngIf="counterNumber !== undefined"
        >
          {{ counterNumber }}{{ formGroup.counterType }}
        </span>
        <span
          class="counter__number e-text-md"
          [ngClass]="{
            small: $any(formGroup.counterMax) < 10,
            disabled: !(formGroup | visibleFields : formStates : true)
          }"
          *ngIf="counterNumber === undefined"
        >
          {{ formGroup.defaultValue }}{{ formGroup.counterType }}
        </span>
        <button
          class="e-btn e-btn--icon e-btn--circled e-btn--sm e-ml-8"
          [disabled]="
            counterNumber === formGroup.counterMax || !(formGroup | visibleFields : formStates : true)
          "
          (click)="
            onInputValueChange(formGroup, undefined, counterNumber ? counterNumber : formGroup.defaultValue);
            updateCounterProp(
              counterNumber ? counterNumber : $any(formGroup.defaultValue),
              formGroup,
              $any(formGroup.counterStepValue)
            )
          "
          aria-label="Add to count"
        >
          <span class="e-btn__icon">
            <i
              class="e-icon e-icon--add_circle"
              [ngClass]="{
                'e-icon--color-disabled':
                  counterNumber === formGroup.counterMax || !(formGroup | visibleFields : formStates : true)
              }"
              aria-hidden="true"
            ></i>
            <i class="e-icon e-icon e-icon--add_circle-filled-color" aria-hidden="true"></i>
          </span>
        </button>
      </div>
    </div>
  </form>
</div>
