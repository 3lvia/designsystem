@import "../../variables/colors.scss";
@import "../../utilities/outline.scss";

$form-radiobutton-mark-size: 24px;
$form-radiobutton-mark-border-radius: 14px;
$form-radiobutton-mark-border: 1px solid color("black");

.e-radio {
  // Variable containing '&' to jump to current parent inside a child class.
  $this: &;

  display: flex;
  align-items: center;
  box-sizing: border-box;
  width: fit-content;
  cursor: pointer;
  &:not(:last-child) {
    margin-bottom: 8px;
  }

  // Hide defualt radiostyle and put in placeholder style
  input {
    opacity: 0;
    outline: none;
    position: absolute;
    z-index: -1;

    // states styles for input
    &:checked ~ #{$this}__mark {
      @extend %radiobutton-mark;
    }

    &:focus ~ #{$this}__mark {
      @include e-outline();
    }

    &:invalid ~ #{$this}__mark {
      border-color: color("red");
    }

    &:disabled ~ #{$this}__mark {
      border-color: color("grey-30");
      background: color("grey-05");
      cursor: not-allowed;
    }
    &:disabled ~ #{$this}__label {
      color: color("grey-70");
    }

    &:disabled:checked ~ #{$this}__mark {
      border-color: color("grey-30");
      background: color("grey-05");
      cursor: not-allowed;

      &:before,
      &:after {
        background-color: color("grey-40");
      }
    }
    &:disabled:checked ~ #{$this}__label {
      color: color("grey-70");
    }
  }
  // Creating placeholder to inject style into radiobutton mutations.
  %radiobutton-mark {
    background-color: color("green");
    display: flex;
    align-items: center;
    justify-content: center;
    &:before {
      content: "";
      height: 14px;
      width: 14px;
      background-color: color("black");
      border-radius: 50%;
    }
  }

  // the new checkbox mark
  &__mark {
    display: inline-block;

    width: $form-radiobutton-mark-size;
    height: $form-radiobutton-mark-size;
    border: $form-radiobutton-mark-border;
    border-radius: $form-radiobutton-mark-border-radius;
    background: color("white");

    //pseudo classes
    &.e-radio__mark---checked {
      @extend %radiobutton-mark;
    }

    &.e-radio__mark---disabled {
      border-color: color("grey-30");
      background: color("grey-05");
      cursor: not-allowed;
    }
    &.e-radio__mark---disabled ~ #{$this}__label {
      color: color("grey-70");
    }
    &.e-radio__mark---disabled-checked {
      @extend %radiobutton-mark;
      border-color: color("grey-30") !important;
      background: color("grey-05") !important;
      cursor: not-allowed;

      &:before,
      &:after {
        background-color: color("grey-40") !important;
      }
    }
    &.e-radio__mark---disabled-checked ~ #{$this}__label {
      color: color("grey-70");
    }

    &.e-radio__mark---focus {
      @include e-outline-pseudoclass();
    }

    &:hover,
    &.e-radio__mark---hover {
      background: color("green");
    }

    &.e-radio__mark---invalid {
      border-color: color("red");
    }
  }

  &__label {
    flex-grow: 1;
    margin-left: 8px;
  }
}
