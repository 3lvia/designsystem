name: Publish to NPM
on:
  push:
    branches:
      - master
      - LEGO-1945-**
    paths:
      - 'packages/elvis/package.json'
      - 'packages/elvis-*/package.json'
      - 'packages/components/components/*/package.json'
jobs:
  publishToNpm:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Get Yarn Cache
        uses: actions/setup-node@v3
        with:
          cache: 'yarn'
      - name: Install
        run: yarn install --immutable
      - name: Publish all changed packages
        run: yarn publish --dry-run
